# تعليمات نشر الموقع على منصة Render

هذا الملف يحتوي على جميع الملفات الأساسية اللازمة لتشغيل الموقع بشكل كامل على منصة Render، مع إصلاح جميع الأخطاء.

## المحتويات

1. جميع ملفات Python الأساسية
2. جميع ملفات القوالب (templates)
3. ملفات CSS و JavaScript الضرورية
4. هيكل المجلدات اللازم لتحميل الملفات
5. ملفات التكوين الضرورية (render.yaml و render-requirements.txt)

## خطوات النشر على منصة Render

### 1. إنشاء قاعدة بيانات PostgreSQL

1. سجل دخول إلى حساب Render الخاص بك
2. من لوحة التحكم، انقر على "New" واختر "PostgreSQL"
3. أدخل المعلومات التالية:
   - Name: portfolio-db (أو أي اسم آخر تفضله)
   - Database: portfolio
   - User: portfolio_user
   - Region: اختر المنطقة الأقرب إليك
4. انقر على "Create Database"
5. انتظر حتى تكتمل عملية إنشاء قاعدة البيانات
6. انسخ رابط الاتصال الداخلي (Internal Database URL) لاستخدامه لاحقًا

### 2. إنشاء تطبيق ويب

1. من لوحة التحكم، انقر على "New" واختر "Web Service"
2. اختر طريقة النشر المناسبة (مثل رفع الملف الذي أعددناه)
3. أدخل المعلومات التالية:
   - Name: portfolio-app (أو أي اسم آخر تفضله)
   - Environment: Python 3
   - Region: اختر نفس المنطقة التي اخترتها لقاعدة البيانات

### 3. إعدادات البناء والتشغيل

أدخل الإعدادات التالية في صفحة إنشاء التطبيق:

#### أمر البناء (Build Command):
```
pip install -r render-requirements.txt
```

#### أمر البدء (Start Command):
```
gunicorn --bind 0.0.0.0:$PORT --reuse-port --workers 4 --timeout 120 main:app
```

### 4. متغيرات البيئة

أضف المتغيرات التالية في قسم "Environment Variables":

#### متغيرات إلزامية:
- `DATABASE_URL`: ضع هنا رابط الاتصال الداخلي الذي نسخته من قاعدة البيانات
- `PORT`: 5000
- `FLASK_SECRET_KEY`: أدخل قيمة عشوائية آمنة (مثال: `a4fb53ac87df9a96c5e7e4a6b9c8d7e6f5a4s3d2f1`)

#### متغيرات اختيارية (إذا كنت تريد استخدام ميزات إضافية):
- `TELEGRAM_BOT_TOKEN`: إذا كنت ترغب في استخدام ميزة إشعارات Telegram
- `TELEGRAM_CHAT_ID`: معرف الدردشة التي ستستقبل الإشعارات
- `SENDGRID_API_KEY`: إذا كنت ترغب في استخدام SendGrid لإرسال البريد الإلكتروني

### 5. النشر

1. انقر على "Create Web Service"
2. انتظر حتى تكتمل عملية البناء والنشر (تستغرق بضع دقائق)
3. عند اكتمال العملية، ستحصل على رابط لموقعك يمكنك زيارته

## بعد النشر

1. قم بزيارة رابط موقعك/admin/login لإنشاء حساب مسؤول جديد
2. سجل دخول باستخدام الحساب الجديد
3. ابدأ في إضافة المحتوى الخاص بك (معرض الأعمال، الخدمات، إلخ)

## الإصلاحات المضمنة

1. إصلاح ملف templates/base.html المفقود
2. تصحيح تناقض المعلمات في نظام إشعارات Telegram
3. إضافة مكتبة user-agents المفقودة إلى render-requirements.txt
4. تحسين التبديل بين SQLite المحلية وPostgreSQL على الخادم

## ملاحظات مهمة

- هذه النسخة تستخدم قاعدة بيانات PostgreSQL على Render
- تم إزالة جميع الصور والمحتوى المرفوع من هذه الحزمة لتقليل الحجم
- يمكنك إضافة المحتوى بعد النشر من خلال لوحة التحكم
- تأكد من تكوين متغيرات البيئة بشكل صحيح، خصوصًا DATABASE_URL

## استكشاف الأخطاء وإصلاحها

إذا واجهت أي مشكلة، يمكنك:

1. التحقق من سجلات التطبيق في لوحة تحكم Render
2. التأكد من إعدادات متغيرات البيئة
3. التحقق من اتصال قاعدة البيانات
4. إذا استمرت المشكلات، يمكنك إعادة بناء التطبيق من خلال زر "Manual Deploy" في لوحة تحكم Render