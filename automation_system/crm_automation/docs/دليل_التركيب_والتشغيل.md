# دليل التركيب والتشغيل الكامل لنظام متابعة العملاء

## المحتويات
1. [المتطلبات الأساسية](#المتطلبات-الأساسية)
2. [خطوات التركيب](#خطوات-التركيب)
3. [تكوين البيئة](#تكوين-البيئة)
4. [تشغيل النظام](#تشغيل-النظام)
5. [التكامل مع Make.com](#التكامل-مع-makecom)
6. [استكشاف الأخطاء وإصلاحها](#استكشاف-الأخطاء-وإصلاحها)
7. [الدعم الفني](#الدعم-الفني)

## المتطلبات الأساسية

### 1. المتطلبات البرمجية
- نظام تشغيل Windows 10/11 أو macOS 10.15+ أو Linux
- Python 3.9 أو أحدث
- Docker Desktop (مطلوب للتشغيل بالحاويات)
- Git

### 2. المتطلبات المادية
- معالج ثنائي النواة على الأقل
- 4 جيجابايت ذاكرة وصول عشوائي (يفضل 8 جيجابايت)
- 2 جيجابايت مساحة تخزين فارغة

## خطوات التركيب

### 1. تنزيل الملفات
1. قم بتحميل الملفات من الرابط المرفق
2. قم بفك ضغط الملفات في مجلد مناسب (مثل: `C:\CRM_System`)

### 2. تثبيت Docker Desktop
1. قم بتحميل Docker Desktop من [الموقع الرسمي](https://www.docker.com/products/docker-desktop/)
2. شغل الملف المحمل واتبع خطوات التثبيت
3. أعد تشغيل الكمبيوتر إذا طُلب منك ذلك

### 3. تشغيل النظام لأول مرة
1. افتح موجه الأوامر (Command Prompt) كمسؤول
2. انتقل إلى مجلد المشروع:
   ```
   cd C:\CRM_System
   ```
3. قم بتشغيل الأمر التالي:
   ```
   docker-compose up -d
   ```
4. انتظر حتى تنتهي عملية التحميل (قد تستغرق بضع دقائق)

## تكوين البيئة

### 1. إعداد ملف البيئة
1. افتح مجلد المشروع
2. انسخ ملف `.env.example` وأعد تسميته إلى `.env`
3. افتح ملف `.env` بالمحرر النصي المفضل لديك
4. قم بتعديل الإعدادات التالية:
   ```
   # إعدادات قاعدة البيانات
   POSTGRES_USER=postgres
   POSTGRES_PASSWORD=your_secure_password
   POSTGRES_DB=crm_automation
   
   # إعدادات البريد الإلكتروني
   SMTP_SERVER=smtp.gmail.com
   SMTP_PORT=587
   SMTP_USERNAME=your_email@gmail.com
   SMTP_PASSWORD=your_email_password
   
   # إعدادات Make.com
   MAKE_WEBHOOK_URL=your_webhook_url_here
   ```

## تشغيل النظام

### 1. الوصول لواجهة المستخدم
1. افتح متصفح الويب
2. اذهب إلى العنوان التالي:
   ```
   http://localhost:8000
   ```
3. سوف تظهر لك واجهة تسجيل الدخول

### 2. تسجيل الدخول
- اسم المستخدم الافتراضي: `admin@example.com`
- كلمة المرور الافتراضية: `admin123`

## التكامل مع Make.com

### 1. إعداد Webhook
1. سجل الدخول إلى حسابك على Make.com
2. أنشئ سيناريو جديد (New Scenario)
3. أضف وحدة HTTP (HTTP > Make a request)
4. قم بتعيين الإعدادات التالية:
   - Method: POST
   - URL: `http://your-server-address:8000/api/webhook/make`
   - Headers: `Content-Type: application/json`
   - Body: اختر `Raw` و `JSON`

### 2. أمثلة على السيناريوهات

#### مثال 1: إضافة عميل جديد
```json
{
  "event": "new_lead",
  "data": {
    "name": "اسم العميل",
    "email": "email@example.com",
    "phone": "+1234567890",
    "source": "website"
  }
}
```

#### مثال 2: تحديث حالة العميل
```json
{
  "event": "update_lead_status",
  "lead_id": "123",
  "new_status": "contacted"
}
```

## استكشاف الأخطاء وإصلاحها

### 1. المشكلة: لا يعمل Docker
- الحل: تأكد من تشغيل Docker Desktop

### 2. المشكلة: خطأ في الاتصال بقاعدة البيانات
- الحل: تأكد من صحة بيانات الاعتماد في ملف `.env`

### 3. المشكلة: لا يتم إرسال البريد الإلكتروني
- الحل: تحقق من إعدادات SMTP وتأكد من تفعيل "الوصول للتطبيقات الأقل أماناً" في حساب Gmail

## الدعم الفني

لأي استفسارات أو مشاكل:
- البريد الإلكتروني: support@example.com
- الهاتف: +1234567890
- ساعات الدعم: الأحد - الخميس، 9 صباحاً - 5 مساءً

---

آخر تحديث: 14 مايو 2025
الإصدار: 1.0.0
